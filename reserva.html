<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reserva tu Tour - Golfito Turismo</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="styles.css"> 
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/footer.css">
    <link rel="stylesheet" href="css/header.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    
    <div id="nav-placeholder"></div>

    <script>
        fetch('includes/nav.html')
        .then(response => response.text())
        .then(data => {
            document.getElementById('nav-placeholder').innerHTML = data;

            // ahora que el nav + modal están cargados, inicializamos el auth
            const auth = new SistemaAutenticacionMejorado();
        });
    </script>

    <!-- Hero de Reserva -->
    <section class="page-hero reservation-hero" style="background-image: url('imagenes/golfito2.jpg');">
            <div class="hero-overlay"></div>
            <div class="hero-content">
                <h1>Reserva tu Aventura</h1>
                <p>Completa el formulario y te contactaremos para confirmar tu tour</p>
            </div>
        </div>
    </section>

    <!-- Formulario de Reserva -->
    <section class="reservation-section">
        <div class="container">
            <div class="reservation-content">
                <div class="reservation-info">
                    <h2>¿Por qué reservar con nosotros?</h2>
                    <p>Somos expertos locales con más de 15 años de experiencia en turismo sostenible en Golfito.</p>
                    
                    <div class="benefits-list">
                        <div class="benefit-item">
                            <i class="fas fa-shield-alt"></i>
                            <div>
                                <h4>Seguridad garantizada</h4>
                                <p>Guías certificados y equipo de seguridad de primera calidad</p>
                            </div>
                        </div>
                        
                        <div class="benefit-item">
                            <i class="fas fa-leaf"></i>
                            <div>
                                <h4>Turismo sostenible</h4>
                                <p>Comprometidos con la conservación del medio ambiente</p>
                            </div>
                        </div>
                        
                        <div class="benefit-item">
                            <i class="fas fa-users"></i>
                            <div>
                                <h4>Grupos pequeños</h4>
                                <p>Experiencias personalizadas con máximo 20 personas</p>
                            </div>
                        </div>
                        
                        <div class="benefit-item">
                            <i class="fas fa-clock"></i>
                            <div>
                                <h4>Flexibilidad</h4>
                                <p>Horarios adaptables y cancelación gratuita 24h antes</p>
                            </div>
                        </div>
                        
                        <div class="benefit-item">
                            <i class="fas fa-star"></i>
                            <div>
                                <h4>Experiencia local</h4>
                                <p>Conocimiento profundo de la flora, fauna y cultura local</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="reservation-form-container">
                    <h3>Formulario de Reserva</h3>
                    <form id="formularioReserva" class="reservation-form">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="nombreCompleto">Nombre completo *</label>
                                <input type="text" id="nombreCompleto" name="nombreCompleto" required>
                                <div class="error-message" id="nombreCompletoError"></div>
                            </div>
                            
                            <div class="form-group">
                                <label for="emailReserva">Correo electrónico *</label>
                                <input type="email" id="emailReserva" name="emailReserva" required>
                                <div class="error-message" id="emailReservaError"></div>
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="telefonoReserva">Teléfono *</label>
                                <input type="tel" id="telefonoReserva" name="telefonoReserva" required>
                                <div class="error-message" id="telefonoReservaError"></div>
                            </div>
                            
                            <div class="form-group">
                                <label for="fechaTour">Fecha del tour *</label>
                                <input type="date" id="fechaTour" name="fechaTour" required>
                                <div class="error-message" id="fechaTourError"></div>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="tourSeleccionado">Tour seleccionado *</label>
                            <select id="tourSeleccionado" name="tourSeleccionado" required>
                                <option value="">Selecciona un tour</option>
                            </select>
                            <div class="error-message" id="tourSeleccionadoError"></div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="numeroPersonas">Número de personas *</label>
                                <select id="numeroPersonas" name="numeroPersonas" required>
                                    <option value="">Selecciona</option>
                                    <option value="1">1 persona</option>
                                    <option value="2">2 personas</option>
                                    <option value="3">3 personas</option>
                                    <option value="4">4 personas</option>
                                    <option value="5">5 personas</option>
                                    <option value="6">6 personas</option>
                                    <option value="7">7 personas</option>
                                    <option value="8">8 personas</option>
                                    <option value="9">9 personas</option>
                                    <option value="10">10 personas</option>
                                    <option value="mas">Más de 10 (especificar en comentarios)</option>
                                </select>
                                <div class="error-message" id="numeroPersonasError"></div>
                            </div>
                            
                            <div class="form-group">
                                <label for="horarioPreferido">Horario preferido</label>
                                <select id="horarioPreferido" name="horarioPreferido">
                                    <option value="">Selecciona un horario</option>
                                    <option value="6:00 AM">6:00 AM</option>
                                    <option value="7:00 AM">7:00 AM</option>
                                    <option value="8:00 AM">8:00 AM</option>
                                    <option value="9:00 AM">9:00 AM</option>
                                    <option value="10:00 AM">10:00 AM</option>
                                    <option value="1:00 PM">1:00 PM</option>
                                    <option value="2:00 PM">2:00 PM</option>
                                    <option value="3:00 PM">3:00 PM</option>
                                    <option value="4:00 PM">4:00 PM</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="comentariosReserva">Comentarios adicionales</label>
                            <textarea id="comentariosReserva" name="comentariosReserva" rows="4" placeholder="Menciona cualquier requerimiento especial, alergias, nivel de experiencia, etc."></textarea>
                        </div>
                        
                        <div class="checkbox-group">
                            <label class="checkbox-label">
                                <input type="checkbox" id="aceptarTerminos" name="aceptarTerminos" required>
                                <span class="checkmark"></span>
                                Acepto los <a href="#" onclick="abrirModal('modalTerminos')">términos y condiciones</a> y la <a href="#" onclick="abrirModal('modalPrivacidad')">política de privacidad</a>
                            </label>
                            <div class="error-message" id="aceptarTerminosError"></div>
                        </div>
                        
                        <button type="submit" class="btn btn-primary btn-large">
                            <i class="fas fa-calendar-check"></i> Enviar Reserva
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </section>

    <!-- Información Adicional -->
    <section class="additional-info-section">
        <div class="container">
            <h2>Información importante</h2>
            <div class="info-grid">
                <div class="info-card">
                    <i class="fas fa-clock"></i>
                    <h3>Confirmación</h3>
                    <p>Te contactaremos en las próximas 2 horas para confirmar disponibilidad y detalles del tour.</p>
                </div>
                
                <div class="info-card">
                    <i class="fas fa-credit-card"></i>
                    <h3>Pago</h3>
                    <p>Aceptamos efectivo, tarjetas y transferencias. El pago se realiza el día del tour.</p>
                </div>
                
                <div class="info-card">
                    <i class="fas fa-calendar-times"></i>
                    <h3>Cancelación</h3>
                    <p>Cancelación gratuita hasta 24 horas antes del tour. Sin penalidades por clima.</p>
                </div>
                
                <div class="info-card">
                    <i class="fas fa-tshirt"></i>
                    <h3>Qué traer</h3>
                    <p>Ropa cómoda, zapatos cerrados, protector solar, repelente y cámara.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <div class="footer-logo">
                        <img src="assets/logo.png" alt="Golfito Tours" style="height: 40px; width: auto; margin-right: 0.5rem;">
                        <span>Golfito Tours</span>
                    </div>
                    <p>Tu puerta de entrada a las maravillas naturales del Golfo Dulce</p>
                </div>
                <div class="footer-section">
                    <h4>Páginas</h4>
                    <ul>
                        <li><a href="index.html">Inicio</a></li>
                        <li><a href="naturaleza.html">Naturaleza</a></li>
                        <li><a href="aventura.html">Aventura</a></li>
                        <li><a href="playas.html">Playas</a></li>
                        <li><a href="historia.html">Historia</a></li>
                        <li><a href="contacto.html">Contacto</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Contacto</h4>
                    <div class="contact-info">
                        <p><i class="fas fa-phone"></i> +506 2775-0000</p>
                        <p><i class="fas fa-envelope"></i> golfitotourstop@gmail.com</p>
                        <p><i class="fas fa-map-marker-alt"></i> Golfito, Puntarenas, Costa Rica</p>
                    </div>
                    <div class="social-links">
                        <a href="https://www.facebook.com/share/1LRczrzZTy/" target="_blank"><i class="fab fa-facebook"></i></a>
                        <a href="https://www.instagram.com/vega_issac?igsh=b2hvcDNmYXgzMzNs" target="_blank"><i class="fab fa-instagram"></i></a>
                        <a href="https://x.com/RodrigoChavesR?t=K74z99YIZzHXk-Oee3BDVg&s=08" target="_blank"><i class="fab fa-twitter"></i></a>
                        <a href="https://www.youtube.com/watch?v=0ZVk-h8WSN0" target="_blank"><i class="fab fa-youtube"></i></a>
                        <a href="https://wa.me/qr/Y3TSTCLYVQQYE1" target="_blank"><i class="fab fa-whatsapp"></i></a>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 Golfito Tours. Todos los derechos reservados.</p>
            </div>
        </div>
    </footer>

    <!-- Notificación -->
    <div id="notificacion" class="notification">
        <span id="mensajeNotificacion"></span>
        <button onclick="cerrarNotificacion()">&times;</button>
    </div>

    <script src="script.js"></script>
    <script src="auth-sistema.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", () => {
        const datosUsuario = localStorage.getItem("usuario_golfito");

        if (datosUsuario) {
            try {
            const usuario = JSON.parse(datosUsuario);

            // Rellenar nombre
            const nombreInput = document.getElementById("nombreCompleto");
            if (usuario.nombre && nombreInput) {
                nombreInput.value = usuario.nombre;
                nombreInput.readOnly = true; // Bloquea el campo
            }

            // Rellenar correo
            const emailInput = document.getElementById("emailReserva");
            if (usuario.email && emailInput) {
                emailInput.value = usuario.email;
                emailInput.readOnly = true; // Bloquea el campo
            }

            } catch (error) {
            console.error("❌ Error al parsear usuario del localStorage:", error);
            }
        }
        });
    </script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const selectTours = document.getElementById('tourSeleccionado');
            if (!selectTours) return;

            // Agrupamos tours por categoría
            const grupos = {};
            datosTours.forEach(tour => {
                let catNombre = '';
                switch(tour.categoria.toLowerCase()) {
                    case 'naturaleza': catNombre = 'Tours de Naturaleza'; break;
                    case 'aventura': catNombre = 'Tours de Aventura'; break;
                    case 'playa': catNombre = 'Tours de Playas'; break;
                    case 'historia': catNombre = 'Tours de Historia'; break;
                    default: catNombre = 'Otros Tours'; break;
                }
                if (!grupos[catNombre]) grupos[catNombre] = [];
                grupos[catNombre].push(tour);
            });

            // Limpiamos select excepto placeholder
            const placeholder = selectTours.querySelector('option[value=""]')?.outerHTML || '<option value="">Selecciona un tour</option>';
            selectTours.innerHTML = placeholder;

            // Creamos optgroups y opciones
            Object.keys(grupos).forEach(categoria => {
                const optgroup = document.createElement('optgroup');
                optgroup.label = categoria;

                grupos[categoria].forEach(tour => {
                    const option = document.createElement('option');
                    option.value = tour.nombre;
                    option.textContent = `${tour.nombre} - ${tour.precio}`;
                    optgroup.appendChild(option);
                });

                selectTours.appendChild(optgroup);
            });

            // PRESELECCIONAR TOUR DESDE URL
            const params = new URLSearchParams(window.location.search);
            const tourSeleccionado = params.get("tour");
            if (tourSeleccionado) {
                for (let i = 0; i < selectTours.options.length; i++) {
                    if (selectTours.options[i].text.includes(tourSeleccionado)) {
                        selectTours.selectedIndex = i;
                        break;
                    }
                }
            }
        });
    </script>


</body>
</html>
